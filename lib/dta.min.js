!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Dta=t()}(this,function(){"use strict";var n=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}return null},r=function(e,t,n,r,o){var a="",i="",c="";if(r){var u=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),s=u?u[0]:"";a=s?"; domain=."+s:""}if(n){var g=new Date;g.setTime(g.getTime()+24*n*60*60*1e3),i="; expires="+g.toGMTString()}o&&(c="; secure"),document.cookie=e+"="+encodeURIComponent(t)+i+"; path=/"+a+c},e=Object.freeze({get:n,parse:function(e){var t;try{t=n(e)||{}}catch(e){console.error(e)}return t},set:r,remove:function(e,t){r(e,"",-1,t)}}),t=window&&window.screen&&{sh:window.screen.height||0,sw:window.screen.width||0,cd:window.screen.colorDepth||0},o=navigator&&{lang:navigator.language||"",platform:navigator.platform||""},a=document&&{url:document.URL||"",title:document.title||"",referrer:document.referrer||"",cookie:JSON.stringify(document.cookie)||""},i=Object.assign({},t,o,a),c={url:"http://recv.log.dtstack.com/dtas"},u=function(){return i},s=function(e){return i=Object.assign(i,e)},g=function(){return c},f=Object.freeze({getDefaultParams:u,setDefaultParams:s,getDefaultOptions:g,setDefaultOptions:function(e){return e.params&&(s(e.params),delete e.params),c=Object.assign(c,e)}}),d=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)};var l=function(e){return e<10?"0"+e:e},m=function(e,t){var n,r=Object.assign(g(),t),o=function(e){var t="";for(var n in e)switch(""!=t&&(t+="&"),n){case"code":t+=n+"="+_encode(e[n]);break;default:t+=n+"="+e[n]}return t}(Object.assign(u(),e));o+="&timestamp="+((n=new Date).getUTCFullYear()+"-"+l(n.getUTCMonth()+1)+"-"+l(n.getUTCDate())+"T"+l(n.getUTCHours())+":"+l(n.getUTCMinutes())+":"+l(n.getUTCSeconds())+"."+(n.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"),new Image(1,1).src=r.url+"?"+o},v=function(e,t,n,r){return e.addEventListener?(e.addEventListener(t,n,r),!0):e.attachEvent?e.attachEvent("on"+t,n):void(e["on"+t]=n)};var h,w;return h=(new Date).getTime(),w=document.getElementsByTagName("body")[0],v(w,"click",function(e){var t=window.event||e;if(-1<t.target.className.indexOf("dta")){var n={};Object.keys(t.target.dataset).filter(function(e){-1<e.indexOf("dta")&&(n[e.substring(3).toLocaleLowerCase()]=t.target.dataset[e])}),m(n)}},!1),navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?v(window,"pagehide",function(){var e=(new Date).getTime(),t={triggerType:"leave"};t.stayTime=e-h,m(t)}):v(window,"beforeunload",function(){var e=(new Date).getTime(),t={triggerType:"leave"};t.stayTime=e-h,m(t)}),{cookie:e,options:f,uuid:function(){var e=(screen.height*screen.width).toString(16);return d()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,n=navigator.userAgent,o=[],r=0,a=function(e,t){var n,r=0;for(n=0;n<t.length;n++)r|=o[n]<<8*n;return e^r};for(e=0;e<n.length;e++)t=n.charCodeAt(e),o.unshift(255&t),4<=o.length&&(r=a(r,o),o=[]);return 0<o.length&&(r=a(r,o)),r.toString(16)}()+"-"+e+"-"+d()},launchRocket:m,carryRocket:function(n,r){n.length;return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];m(r),n.apply(void 0,e)}}}});
